# INT Interview Prep Tool - Environment Variables
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================

# Your Supabase project URL (from Supabase dashboard)
# Format: https://[PROJECT-ID].supabase.co
VITE_SUPABASE_URL=https://xjjjvefsrkcszhuwtoss.supabase.co

# Your Supabase public/anonymous key (safe for frontend)
# Used in src/lib/supabase.ts for client-side authentication
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase database URL for backend functions (DO NOT expose to frontend)
# Format: postgresql://[USER]:[PASSWORD]@[HOST]:[PORT]/[DATABASE]
# Used only in Edge Functions (backend)
SUPABASE_DATABASE_URL=postgresql://postgres:password@db.supabase.internal:5432/postgres

# Supabase service role key (DO NOT expose to frontend)
# Has full admin access, used only in Edge Functions
# Found in: Supabase Dashboard → Project Settings → API Keys
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

SUPABASE_DB_PASSWORD=...

# =============================================================================
# EXTERNAL API KEYS (Backend/Edge Functions only)
# =============================================================================

# OpenAI API key for GPT-4o and GPT-4o-mini models
# Get from: https://platform.openai.com/api-keys
# Used in Edge Functions for:
#   - Company research analysis
#   - Job description analysis
#   - CV parsing and analysis
#   - Interview synthesis
#   - Question generation
#   - CV-Job comparisons
OPENAI_API_KEY=sk-proj-...

# Tavily AI API key for web search and content extraction
# Get from: https://tavily.com
# Used for discovering interview questions, company insights, job details
TAVILY_API_KEY=tvly-...

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Node environment (development, production, test)
NODE_ENV=development

# Vite configuration
# Port for local development server
VITE_PORT=8080

# =============================================================================
# EDGE FUNCTION CONFIGURATION
# These are used by supabase/functions/_shared/config.ts
# =============================================================================

# OpenAI Model Selection
# Critical processes (high quality needed):
#   - COMPANY_RESEARCH_MODEL: Analysis of company culture, interview process
#   - JOB_ANALYSIS_MODEL: Job requirements extraction
#   - CV_ANALYSIS_MODEL: CV parsing and skill extraction
#   - INTERVIEW_SYNTHESIS_MODEL: Final synthesis of all data
#   - CV_JOB_COMPARISON_MODEL: CV vs Job detailed analysis
# Important processes (balanced quality/cost):
#   - QUESTION_GENERATION_MODEL: Question generation (high volume)
#
# Typical values: 'gpt-4o' (best), 'gpt-4o-mini' (cheaper)
OPENAI_COMPANY_RESEARCH_MODEL=gpt-4o
OPENAI_JOB_ANALYSIS_MODEL=gpt-4o
OPENAI_CV_ANALYSIS_MODEL=gpt-4o
OPENAI_INTERVIEW_SYNTHESIS_MODEL=gpt-4o
OPENAI_CV_JOB_COMPARISON_MODEL=gpt-4o
OPENAI_QUESTION_GENERATION_MODEL=gpt-4o-mini

# Max tokens for each operation
# Controls response length and API costs
OPENAI_COMPANY_ANALYSIS_MAX_TOKENS=5000
OPENAI_INTERVIEW_SYNTHESIS_MAX_TOKENS=5000
OPENAI_CV_ANALYSIS_MAX_TOKENS=3000
OPENAI_QUESTION_GENERATION_MAX_TOKENS=3000
OPENAI_CV_JOB_COMPARISON_MAX_TOKENS=4000

# Temperature settings for each operation type
# Deterministic (0.0-0.3): Consistent, factual responses
# Balanced (0.4-0.7): Creative but consistent
OPENAI_ANALYSIS_TEMPERATURE=0.3
OPENAI_SYNTHESIS_TEMPERATURE=0.5
OPENAI_QUESTIONS_TEMPERATURE=0.5
OPENAI_COMPARISON_TEMPERATURE=0.5

# =============================================================================
# TAVILY API CONFIGURATION
# Controls web search behavior and cost
# =============================================================================

# Search depth: 'basic' (faster, cheaper) or 'advanced' (slower, more comprehensive)
TAVILY_SEARCH_DEPTH=basic

# Maximum number of search results to fetch during discovery phase
TAVILY_DISCOVERY_MAX_RESULTS=12

# Maximum number of URLs to extract full content from
# Higher = more comprehensive but slower and more expensive
TAVILY_EXTRACTION_MAX_RESULTS=15

# Time range for search results: 'day', 'week', 'month', 'year'
TAVILY_TIME_RANGE=year

# Maximum credits allowed per search (1 credit = 1 search operation)
# Each search uses ~1 credit, each extraction uses 1 credit
TAVILY_MAX_CREDITS_PER_SEARCH=30

# =============================================================================
# PROCESSING CONFIGURATION
# Controls how backend functions execute
# =============================================================================

# Concurrent API call timeouts (milliseconds)
# These are used by supabase/functions/_shared/progress-tracker.ts

# Timeout for company research API call
CONCURRENT_TIMEOUT_COMPANY_RESEARCH=20000

# Timeout for job analysis API call
CONCURRENT_TIMEOUT_JOB_ANALYSIS=20000

# Timeout for CV analysis API call
CONCURRENT_TIMEOUT_CV_ANALYSIS=15000

# Timeout for question generation API call
CONCURRENT_TIMEOUT_QUESTION_GENERATION=40000

# Total operation timeout (sum of concurrent operations + overhead)
CONCURRENT_TIMEOUT_TOTAL_OPERATION=60000

# Maximum retries for failed API calls
MAX_RETRIES=2

# Delay between retries (milliseconds) - implements exponential backoff
RETRY_DELAY_MS=1000

# =============================================================================
# CONTENT PROCESSING CONFIGURATION
# =============================================================================

# Maximum content length for source snippets (characters)
CONTENT_MAX_SOURCE_SNIPPET=4500

# Maximum content length for deep extractions (characters)
CONTENT_MAX_DEEP_EXTRACT=6000

# Maximum context length for AI analysis (characters)
CONTENT_MAX_CONTEXT_BUILDING=32000

# =============================================================================
# FEATURE FLAGS
# Enable/disable functionality without code changes
# =============================================================================

# Enable hybrid web scraping (native + Tavily)
FEATURE_ENABLE_HYBRID_SCRAPING=true

# Enable deep content extraction from URLs
FEATURE_ENABLE_DEEP_EXTRACTION=true

# Enable company ticker symbols for Blind searches
FEATURE_ENABLE_COMPANY_TICKERS=true

# Enable international search sites (1point3acres, etc)
FEATURE_ENABLE_INTERNATIONAL_SEARCH=true

# Enable recent time filters (2024-2025)
FEATURE_ENABLE_RECENT_TIME_FILTER=true

# Enable interview stage extraction from candidate reports
FEATURE_ENABLE_INTERVIEW_STAGE_EXTRACTION=true

# Enable JSON mode for OpenAI responses
FEATURE_ENABLE_JSON_MODE=true

# Enable fallback responses when APIs fail
FEATURE_ENABLE_FALLBACK_RESPONSES=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level: 'DEBUG', 'INFO', 'WARN', 'ERROR'
LOG_LEVEL=INFO

# Enable API request/response logging
LOG_API_REQUESTS=true

# Enable phase transition logging
LOG_PHASE_TRANSITIONS=true

# Enable performance metrics logging
LOG_PERFORMANCE_METRICS=true

# Enable content sample logging (first 500 chars)
LOG_CONTENT_SAMPLES=true

# =============================================================================
# DEVELOPMENT CONFIGURATION
# Development-only settings, should not be used in production
# =============================================================================

# Mock API responses instead of making real calls (for testing)
MOCK_API_RESPONSES=false

# Verbose logging output
VERBOSE_LOGGING=true

# Save raw API responses to files for analysis
SAVE_RAW_RESPONSES=true

# Skip any caching mechanisms
SKIP_CACHE=false

# =============================================================================
# FRONTEND-ONLY VARIABLES (available in browser)
# All variables starting with VITE_ are exposed to frontend
# =============================================================================

# Frontend base URL (for API calls from browser)
VITE_API_BASE_URL=http://localhost:8080

# Frontend API timeout (milliseconds)
VITE_API_TIMEOUT=30000

# Frontend polling interval for job progress (milliseconds)
VITE_PROGRESS_POLL_INTERVAL=2000

# Show detailed progress steps in UI
VITE_SHOW_DETAILED_PROGRESS=true

# =============================================================================
# NOTES
# =============================================================================
#
# SECURITY:
# - Never commit actual values to git (this file is in .gitignore)
# - Backend variables (no VITE_ prefix) are NEVER exposed to frontend
# - Only VITE_ prefixed variables are safe to expose
#
# PROCESSING TIME EXPECTATIONS:
# - Company Research: 20-30s (Tavily search + OpenAI analysis)
# - Job Analysis: 15-20s (URL extraction + OpenAI analysis)
# - CV Analysis: 10-15s (OpenAI parsing)
# - Question Generation: 30-40s (Concurrent for multiple stages)
# - Interview Synthesis: 20-30s (Multi-step AI synthesis)
# - Total Expected: 10-15 minutes for full process
#
# API COSTS:
# - Tavily: 1 credit per search, 1 per extraction (~$0.01-0.05 per search)
# - OpenAI: $0.02-0.10 per request depending on model and tokens
# - Typical search cost: $0.50-1.50
#
# TIMEOUT STRATEGY:
# - Increase timeouts if seeing timeout errors
# - Decrease for faster UI feedback (but may cause failures)
# - Total operation timeout must be < Supabase Edge Function limit (600s)
#
